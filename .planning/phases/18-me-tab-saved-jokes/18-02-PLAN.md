---
phase: 18-me-tab-saved-jokes
plan: 02
type: execute
wave: 1
depends_on: ["18-01"]
files_modified: ["MrFunnyJokes/MrFunnyJokes/Views/JokeDetailSheet.swift"]
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Save button appears below the Divider, grouped with Copy and Share in the same VStack"
    - "Save button uses blue tint (matching Copy/Share), toggling to green when saved (matching Copy's copied state)"
  artifacts:
    - path: "MrFunnyJokes/MrFunnyJokes/Views/JokeDetailSheet.swift"
      provides: "Save button grouped with Copy and Share below divider"
      contains: "Save"
  key_links:
    - from: "Save button"
      to: "Action buttons VStack"
      via: "Placed as first item in VStack(spacing: 12) alongside Copy and Share"
      pattern: "VStack.*spacing.*12.*Save.*Copy.*Share"
---

<objective>
Move the Save button below the Divider and group it with Copy and Share in the action buttons VStack, with blue tint matching the other action buttons.

Purpose: UAT test 5 failed â€” user expects Save to be visually grouped with Copy/Share below the divider, all with consistent blue styling.
Output: Updated JokeDetailSheet.swift with Save button relocated and restyled.
</objective>

<execution_context>
@/Users/brianvanaski/.claude/get-shit-done/workflows/execute-plan.md
@/Users/brianvanaski/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@MrFunnyJokes/MrFunnyJokes/Views/JokeDetailSheet.swift
</context>

<tasks>

<task type="auto">
  <name>Task 1: Move Save button below Divider and apply blue tint</name>
  <files>MrFunnyJokes/MrFunnyJokes/Views/JokeDetailSheet.swift</files>
  <action>
In JokeDetailSheet.swift body, make two changes:

1. **Remove the Save button block** currently at lines 51-65 (the entire Button with its label, buttonStyle, and tint, located between the BinaryRatingView and the Divider).

2. **Add the Save button as the FIRST item** inside the existing `VStack(spacing: 12)` at line 70 (the action buttons VStack that contains Copy and Share). Place it before the Copy button. The Save button should be:

```swift
Button {
    onSave()
    HapticManager.shared.lightTap()
} label: {
    HStack(spacing: 8) {
        Image(systemName: joke.isSaved ? "person.fill" : "person")
            .contentTransition(.symbolEffect(.replace))
        Text(joke.isSaved ? "Saved" : "Save")
    }
    .frame(maxWidth: .infinity, minHeight: 24)
    .padding(.vertical, 14)
}
.buttonStyle(.bordered)
.tint(joke.isSaved ? .green : .blue)
.animation(.easeInOut(duration: 0.2), value: joke.isSaved)
```

Key details:
- Use `.tint(joke.isSaved ? .green : .blue)` to match Copy's pattern (Copy uses `.tint(isCopied ? .green : .blue)`)
- Add `.animation(.easeInOut(duration: 0.2), value: joke.isSaved)` to match Copy's animation pattern
- Keep `HapticManager.shared.lightTap()` per project conventions
- Keep the `spacing: 8` in the HStack label and `minHeight: 24` to match Copy/Share button sizing
- The Divider should now have only the BinaryRatingView above it (no Save button between rating and divider)

Final button order in the VStack: Save, Copy, Share.
  </action>
  <verify>
Build the project: `cd MrFunnyJokes && xcodebuild -scheme MrFunnyJokes -destination 'platform=iOS Simulator,name=iPhone 16 Pro' build 2>&1 | tail -5`

Verify structure: The Save button appears inside the VStack(spacing: 12) block, after the Divider, before Copy. No Save button exists above the Divider.
  </verify>
  <done>Save button is positioned below the Divider, grouped in the same VStack as Copy and Share, with .tint(joke.isSaved ? .green : .blue) matching the action button styling pattern.</done>
</task>

</tasks>

<verification>
- JokeDetailSheet.swift compiles without errors
- Save button is inside the action buttons VStack (below Divider)
- Save button uses .tint(joke.isSaved ? .green : .blue)
- Copy button still uses .tint(isCopied ? .green : .blue)
- Share button still uses .tint(.blue)
- Button order in VStack: Save, Copy, Share
- No Save button exists above the Divider
</verification>

<success_criteria>
Save button is visually grouped with Copy and Share below the Divider, all three buttons share consistent blue tint styling, and the saved state toggles to green matching the Copy button's copied state pattern.
</success_criteria>

<output>
After completion, create `.planning/phases/18-me-tab-saved-jokes/18-02-SUMMARY.md`
</output>
