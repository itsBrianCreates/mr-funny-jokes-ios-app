---
phase: 01-foundation-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - MrFunnyJokes/MrFunnyJokes.xcodeproj/project.pbxproj
autonomous: true

must_haves:
  truths:
    - "App only runs on iPhone - no iPad deployment target"
    - "Widget extension only targets iPhone"
    - "No iPad-specific assets remain in bundle"
  artifacts:
    - path: "MrFunnyJokes/MrFunnyJokes.xcodeproj/project.pbxproj"
      provides: "Build settings for all targets"
      contains: "TARGETED_DEVICE_FAMILY = 1"
  key_links: []
---

<objective>
Verify iPhone-only deployment and clean up any iPad remnants.

Purpose: Confirm build settings are correct and remove any leftover iPad-specific assets to simplify the testing matrix.
Output: Verified project configuration with no iPad artifacts.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-cleanup/01-CONTEXT.md
@.planning/phases/01-foundation-cleanup/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Verify iPhone-only build settings</name>
  <files>MrFunnyJokes/MrFunnyJokes.xcodeproj/project.pbxproj</files>
  <action>
  Verify that TARGETED_DEVICE_FAMILY = 1 is set for ALL build configurations in BOTH targets:
  1. MrFunnyJokes (main app target)
  2. JokeOfTheDayWidgetExtension (widget target)

  Search project.pbxproj for all occurrences of TARGETED_DEVICE_FAMILY. Each target should have this set to "1" (iPhone only) in both Debug and Release configurations.

  Expected: 4 occurrences total (2 targets x 2 configurations), all set to "1".

  If any are set to "1,2" (Universal) or "2" (iPad only), update them to "1".
  </action>
  <verify>grep -c "TARGETED_DEVICE_FAMILY = 1" project.pbxproj returns 4</verify>
  <done>All TARGETED_DEVICE_FAMILY entries are set to 1 (iPhone only)</done>
</task>

<task type="auto">
  <name>Task 2: Audit and remove iPad assets</name>
  <files>MrFunnyJokes/MrFunnyJokes/Assets.xcassets</files>
  <action>
  Audit Assets.xcassets for iPad-specific images:
  1. Check for any image sets with "~ipad" suffix
  2. Check Contents.json files for "idiom": "ipad" entries
  3. Check for any LaunchScreen assets with iPad variants
  4. Check AppIcon.appiconset for iPad-specific icon sizes (76x76, 83.5x83.5)

  Remove any iPad-specific assets found. Keep all iPhone assets intact.

  If no iPad assets are found, document this in the summary - this is the expected state based on research.
  </action>
  <verify>find Assets.xcassets -name "*.json" -exec grep -l "ipad" {} \; returns empty (no iPad entries)</verify>
  <done>No iPad-specific assets in bundle, or all iPad assets removed</done>
</task>

</tasks>

<verification>
1. Build the app in Xcode: `xcodebuild -project MrFunnyJokes.xcodeproj -scheme MrFunnyJokes -destination 'platform=iOS Simulator,name=iPhone 16' build`
2. Verify no iPad simulator appears as valid destination
3. Verify build succeeds without warnings about missing device families
</verification>

<success_criteria>
- TARGETED_DEVICE_FAMILY = 1 in all 4 build configuration entries
- No iPad assets in Assets.xcassets
- App builds successfully for iPhone simulator
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-cleanup/01-01-SUMMARY.md`
</output>
